# بخش ۱) تشخیص الگوها و زیرمسئله‌ها
پس از بررسی کد TicketService مشخص شد که کد فعلی دارای "پیچیدگی چرخه‌ای" (Cyclomatic Complexity) بالایی است و اصول OCP و SRP را نقض می‌کند. زیرمسئله‌ها و الگوهای پیشنهادی به شرح زیر است:
## ۱. مدیریت چرخه عمر و گذار وضعیت (State Transition)
•	شرح زیرمسئله: متغیر state به صورت String تعریف شده و در هر مرحله از متد handle مقدار آن تغییر می‌کند. تمام منطق‌های مربوط به وضعیت‌های NEW, ASSIGNED, IN_PROGRESS و غیره در یک متد متمرکز شده‌اند که نگهداری آن را غیرممکن می‌کند.
•	الگوی پیشنهادی: State Pattern
•	دلیل انتخاب: این الگو به ما اجازه می‌دهد هر وضعیت را به یک کلاس مستقل تبدیل کنیم. به این ترتیب، انتقال از یک وضعیت به وضعیت بعدی (مثلاً از ASSIGNED به IN_PROGRESS) به جای تغییر یک متغیر رشته‌ای، با تغییر شیء وضعیت انجام می‌شود.
•	روش اعمال: یک اینترفیس TicketState تعریف می‌کنیم. کلاس‌هایی مانند NewState و AssignedState را می‌سازیم. هر کلاس مسئول چاپ پیام مربوط به خود و تغییر وضعیتِ تیکت به مرحله بعدی است.
## ۲. تنوع در منطق پاسخ‌دهی (Response Logic)
•	شرح زیرمسئله: در کد مشاهده می‌شود که بر اساس type (مثلاً BUG یا غیره)، سیستم تصمیم می‌گیرد که پاسخ متفاوتی ارسال کند (bug response در مقابل generic response). در حال حاضر این منطق با دستور if سخت‌کد (Hard-coded) شده است.
•	الگوی پیشنهادی: Strategy Pattern
•	دلیل انتخاب: اگر بخواهیم در آینده نوع جدیدی از پاسخ (مثلاً پاسخ برای تیکت‌های مالی) اضافه کنیم، نباید متد اصلی را دستکاری کنیم. الگوی استراتژی به ما اجازه می‌دهد الگوریتم پاسخ‌دهی را به عنوان یک "قابلیت" به تیکت تزریق کنیم.
•	روش اعمال: یک اینترفیس ResponseStrategy با متد send() ایجاد می‌کنیم. کلاس‌های BugResponse و GenericResponse این اینترفیس را پیاده‌سازی می‌کنند.

## ۳. ساختاردهی به ایجاد تیکت (Ticket Creation)
•	شرح زیرمسئله: منطق بررسی کانال ورودی (WEB یا EMAIL) در ابتدای متد قرار دارد. این یعنی سیستم مستقیماً درگیر جزئیات ساخت و شناسایی اولیه تیکت شده است.
•	الگوی پیشنهادی: Factory Method
•	دلیل انتخاب: برای جداسازی منطق "ساخت و پیکربندی" از منطق "پردازش"، به یک کارخانه نیاز داریم تا بر اساس پارامترهای ورودی، شیء تیکت را با ویژگی‌های درست (مثل نوع استراتژی یا وضعیت اولیه) ایجاد کند.
•	روش اعمال: کلاس TicketFactory را ایجاد می‌کنیم که متدی برای تولید تیکت بر اساس کانال ورودی دارد و اشیاء لازم را نمونه‌سازی می‌کند.
